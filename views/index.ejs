<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <title>Book My Parking</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="mainstyle.css">
</head>


<body>
    
    <div class="top">
        <div class="park_logo" style="display: flex;">
            <img src="https://cdn.dribbble.com/users/1287580/screenshots/5410442/dribbble_2.gif" alt="">
            <div class="logo"> <img src="logo.png" x alt=""></div>
        </div>
        <div class="park_name">
            <div class="car">
                <img src="car.png" alt="">
                <div class="car_wheel">
                    <img src="wheel.png" alt="" class="f_wheel">
                    <img src="wheel.png" alt="" class="b_wheel">
                </div>
            </div>
        </div>

    </div>

   
    <div class="header">
        <ul>
            <li><a href="" class="nav_links">Home</a></li>
            <li><a href="" class="nav_links">Pricing</a></li>
            <li><a href="" class="nav_links">Facilities</a></li>
            <li><a href="#aboutus" class="nav_links" target="_blank">About us</a></li>
            <li><a href="/login" class="nav_links">Login</a>
                <div class="sub_menu_login">
                    <ul>
                        <li><a href="loginform.html" class="nav_links" target="_blank"> User</a></li>
                        <li><a href="loginform.html" class="nav_links" target="_blank"> Admin</a></li>
                    </ul>
                </div>
            </li>
            <li><a href="/register" class="nav_links">Register</a></li>

            <li>
                <a href="www.google.com" target="_blank">
                    <span class="material-symbols-outlined icon">
                        mail
                    </span>
                </a>

            </li>
            <li>
                <a href="www.google.com" target="_blank">
                    <span class="material-symbols-outlined icon">
                        phone_in_talk
                    </span>
                </a>

            </li>
        </ul>

    </div>

    <!-- -------main body --------background--------------------- -->

    <div class="first_page">
        <div class="fpl1" id="typewriter-heading1"></div>
        <div class="fpl2" id="typewriter-heading2"></div>
        <div class="fpl2" id="typewriter-heading3">:</div>
        <div class="fpl3" id="typewriter-heading4"><b></b> </div>
    </div>


    <!-- --------------------page 2-----------form------select state-------------- -->



    <div id="map">

    </div>
    <div class="find-btn">
        <button class="btn btn-outline-warning" id="showbtn" onclick="show()">find Avalible parking near me</button>


    </div>
<div id="mapAndMetaMaskSection" style="display: none;">
    
    <div class="seating-area" id="seatingArea">
        <!-- Seats will be dynamically added here -->`

    </div>
    <!-- Button to confirm booked seats -->
    <button class="confirm-button" onclick="confirmSeats()">Confirm Seats</button>
    <form id="timeForm">
        <label for="fromTime">From:</label>
        <input type="time" id="fromTime" name="fromTime">
        <label for="toTime">To:</label>
        <input type="time" id="toTime" name="toTime">
        <button type="submit">Start Timer</button>
    </form>

    <div id="timerDisplay" style="display: none;">
        <p id="timer"></p>
        <p id="priceDisplay"></p>
        <select id="currency">
           
            <option value="eth" selected>Ethereum (ETH)</option>
            <option value="usd">US Dollars ($)</option>
        </select>
       
    </div>

<br>
<button type="button " id="payButton" class="btn btn-primary" style="margin-left: 30%;">Pay Using UPI</button>
   
    <button id="connect-button">Connect MetaMask</button>
    <button id="pay-button" style="display: none;">Pay</button>
    
</div>


    <!-- ----------page 3 ---------------------------------------------- -->

    <div class="third_page">
        <div class="features_heading">
            What's Make US Diffrent From Other :
        </div>
        <div class="container">
            <div class="box">
                <div class="feature_name">Security</div>
                <div class="box_img">
                    <img src="camera.png" alt="">
                </div>
                <div class="feature_discription">Parking station are under cctv survilence. Fire and other security
                    feature are installed. </div>
            </div>
            <div class="box">
                <div class="feature_name">Efficient Parking </div>
                <div class="box_img">
                    <img src="space_efficient.png" alt="">
                </div>
                <div class="feature_discription">Parking space is utilized according to its full efficiency.
                </div>
            </div>
            <div class="box">
                <div class="feature_name">Easy Record Access</div>
                <div class="box_img">
                    <img src="database.png" alt="">
                </div>
                <div class="feature_discription">Data can be easily accesed for any future referece like any vehicle
                    related to criminal offense.</div>
            </div>
            <div class="box">
                <div class="feature_name">Money Saving</div>
                <div class="box_img">
                    <img src="wallet.png" alt="">
                </div>
                <div class="feature_discription">Pricing is according to the time parked. No extra charged is charged.
                </div>
            </div>

        </div>
    </div>

    <!-- --------------------------youtube video --------------------------------- -->
    <div class="ytb">
        <div class="features_heading">
            WORKING MODEL ANIMATED VIDEO
        </div>
        <div class="ytb_container">
            <iframe width="700" height="413" src="video.mp4" title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
        </div>
    </div>



    </div>
    <!-- --------------------------footer-----------------footer-------------------------------- -->
    <div class="footer">
        <div class="footer_container">
            <div class="footer_box">
                <div class="footer_box_head">Quick Links</div>
                <div class="quick_links"><a href="">> About company</a></div>
                <div class="quick_links"><a href="">> Blogs</a></div>
                <div class="quick_links"><a href="">> Help And Support</a></div>
                <div class="quick_links"><a href="">> Jobs</a></div>
            </div>
            <div class="footer_box footer_box2">
                <div class="footer_box_head">
                    Contacts
                </div>
                <div class="contacts">Payment Issue : +91 989XXXXXX5</div>
                <div class="contacts">Payment Issue : Support.epark@gmail.com</div>
                <div class="contacts">Feedback: feedbacks.epark@gmail.com</div>
            </div>
            <!-- <div class="footer_box"><img src="alogo.png" alt=""></div> -->

        </div>
        <div class="bottom">
            <div class="copy_right">Copyright Â© 2023 | E-PARKING LIMITED. All Rights Reserved.</div>
            <div class="my_name">DESIGNED AND MAINTAINED BY PARK INNOVATORS</div>
        </div>
    </div>

    <script src="map.js"></script>
    <script src="parking.js"></script>
    <script src="book.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>
        

        document.getElementById('payButton').onclick = function () {
            var options = {
                "key": "rzp_test_moY72rUjlJiM5d",
                "amount": 50000, // Amount in paise (INR 500)
                "currency": "INR",
                "name": "Your Company Name",
                "description": "Purchase Description",
                "image": "https://your-company-logo-url.com/logo.png",
                "handler": function (response){
                    alert("Payment successful. Payment ID: " + response.razorpay_payment_id);
                },
                "prefill": {
                    "name": "Your Name",
                    "email": "your.email@example.com",
                    "contact": "9999999999"
                },
                "theme": {
                    "color": "#3399cc"
                }
            };
            var rzp = new Razorpay(options);
            rzp.open();
        };

 function show() {
            // Show alert message
            alert("Finding parking near you...");
        
            // Wait for 3 seconds before displaying the next section
            setTimeout(function() {
                // Hide the find button
                document.getElementById("showbtn").style.display = "none";
        
             
                document.getElementById("mapAndMetaMaskSection").style.display = "block";
            }, 3000);
        };


       
        

        document.getElementById("timeForm").addEventListener("submit", function(event) {
            event.preventDefault();

            // Get user input
            const fromTime = document.getElementById("fromTime").value;
            const toTime = document.getElementById("toTime").value;

            // Calculate duration
            const fromTimestamp = Date.parse(`1970-01-01T${fromTime}`);
            const toTimestamp = Date.parse(`1970-01-01T${toTime}`);
            const duration = toTimestamp - fromTimestamp;

            // Start timer
            startTimer(duration);
        });

        function startTimer(duration) {
            const timerDisplay = document.getElementById("timerDisplay");
            const timer = document.getElementById("timer");
            const priceDisplay = document.getElementById("priceDisplay");
            const currencySelector = document.getElementById("currency");

            // Display timer
            timerDisplay.style.display = "block";

            // Update timer every second
            const interval = setInterval(function() {
                // Calculate remaining time
                const minutes = Math.floor((duration / (1000 * 60)) % 60);
                const seconds = Math.floor((duration / 1000) % 60);

                // Display remaining time
                timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                // Decrease duration
                duration -= 1000;

                // If duration is less than or equal to 0, stop timer
                if (duration <= 0) {
                    clearInterval(interval);
                    timer.textContent = "Time's up!";
                }
            }, 1000);

            // Calculate price based on currency
            const currency = currencySelector.value;
            let pricePerMinute;
            if (currency === "rs") {
                pricePerMinute = 2; // â¹2 per minute
            } else if (currency === "eth") {
                pricePerMinute = 0.002; // 0.002 ETH per minute
            } else if (currency === "usd") {
                pricePerMinute = 0.03; // $0.03 per minute
            }

            const totalPrice = pricePerMinute * (duration / (1000 * 60));

            // Display price
            priceDisplay.textContent = `Price: ${totalPrice.toFixed(2)} ${currency.toUpperCase()}`;
        }
        function startTimer(duration) {
            const timerDisplay = document.getElementById("timerDisplay");
            const timer = document.getElementById("timer");
            const priceDisplay = document.getElementById("priceDisplay");
            const currencySelector = document.getElementById("currency");
        
            // Display timer
            timerDisplay.style.display = "block";
        
            // Update timer every second
            const interval = setInterval(function () {
                // Calculate remaining time
                const minutes = Math.floor((duration / (1000 * 60)) % 60);
                const seconds = Math.floor((duration / 1000) % 60);
        
                // Display remaining time
                timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        
                // Decrease duration
                duration -= 1000;
        
                // If duration is less than or equal to 0, stop timer
                if (duration <= 0) {
                    clearInterval(interval);
                    timer.textContent = "Time's up!";
                }
            }, 1000);
        
            // Calculate price based on currency
            const currency = currencySelector.value;
            let pricePerMinute;
            if (currency === "eth") {
                pricePerMinute = 0.002; // 0.002 ETH per minute
            } else if (currency === "usd") {
                pricePerMinute = 0.03; // $0.03 per minute
            } else {
                pricePerMinute = 2; // â¹2 per minute (default)
            }
        
            const totalPrice = pricePerMinute * (duration / (1000 * 60));
        
            // Display price
            priceDisplay.textContent = `Price: ${totalPrice.toFixed(2)} ${currency.toUpperCase()}`;
        }
        
        function startTimer(duration) {
            const timerDisplay = document.getElementById("timerDisplay");
            const timer = document.getElementById("timer");
            const priceDisplay = document.getElementById("priceDisplay");
            const currencySelector = document.getElementById("currency");
        
            // Display timer
            timerDisplay.style.display = "block";
        
            // Update timer every second
            const interval = setInterval(function() {
                // Calculate remaining time
                const minutes = Math.floor((duration / (1000 * 60)) % 60);
                const seconds = Math.floor((duration / 1000) % 60);
        
                // Display remaining time
                timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        
                // Decrease duration
                duration -= 1000;
        
                // If duration is less than or equal to 0, stop timer
                if (duration <= 0) {
                    clearInterval(interval);
                    timer.textContent = "Time's up!";
                }
            }, 1000);
        
            // Calculate price based on currency
            const currency = currencySelector.value;
            let pricePerMinute;
            if (currency === "eth") {
                pricePerMinute = 0.002; // 0.002 ETH per minute
            } else if (currency === "usd") {
                pricePerMinute = 0.03; // $0.03 per minute
            } else {
                pricePerMinute = 2; // â¹2 per minute (default)
            }
        
            const totalPrice = pricePerMinute * (duration / (1000 * 60));
        
            // Display price
            priceDisplay.textContent = `Price: ${totalPrice.toFixed(6)} ETH`;
        }
        
    </script>

</body>

</html>